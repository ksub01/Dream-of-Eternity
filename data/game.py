from colorama import Fore, Style


import data.world.creature as world
import data.battle.battle as battle
import data.shop.blacksmith as blacksmith
import data.shop.casino as casino
import data.shop.hotel as hotel

import random
import time

INVENTORY_MESSAGE = Fore.GREEN + Style.BRIGHT
DIE_MASSAGE = Fore.RED + Style.BRIGHT
HELP_MESSAGE = Fore.CYAN + Style.DIM
TOWN_MESSAGE = Style.DIM + Fore.LIGHTYELLOW_EX
MENU_TOWN_MASSAGE = Fore.LIGHTBLUE_EX
STORY_MESSAGE = Fore.YELLOW + Style.DIM
MESSAGE_DIALOGUE = Fore.GREEN
LVL_UP_MESSAGE = Fore.YELLOW + Style.BRIGHT
MESSAGE_DAMAGE = Fore.GREEN + Style.DIM
MESSAGE_HEAL = Fore.MAGENTA + Style.BRIGHT


class Town:
    """–ì–æ—Ä–æ–¥"""
    @staticmethod
    def if_lvl_up(player):
        """–í –≥–æ—Ä–æ–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å. –ó–Ω–∞—á–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ –º–∞—Å—Å–∏–≤–∞ –æ–ø—ã—Ç–∞ exp
        –≤ lvl_up"""
        if player.parameter.test_lvl_up():
            print(INVENTORY_MESSAGE + "–ü–æ—Å–ø–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –≤–∞—à —É—Ä–æ–≤–µ–Ω—å\n")

    @staticmethod
    def town_places():
        """–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –≤ –≥–æ—Ä–æ–¥–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Å—Ç, –∫—É–¥–∞ –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø–æ–π—Ç–∏"""
        print(TOWN_MESSAGE + '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –≥–æ—Ä–æ–¥–µ –ê—Ä–∫–æ–Ω–∞, –ø–æ—Å–ª–µ–¥–Ω–µ–º –æ–ø–ª–æ—Ç–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞' + '\n')
        print(MENU_TOWN_MASSAGE + '‚ïç' * 40)
        print('üõñ ‚ûî 1\n'
              'üõå ‚ûî 2\n'
              'üå≤ ‚ûî 3\n'
              'üé≤ ‚ûî 4\n'
              'üè° ‚ûî 5')
        print('‚ïç' * 40)


class Game:
    """–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏–∏ –¥–ª—è –∏–≥—Ä—ã"""
    def __init__(self):
        self.town = Town()
        self.player = None

    @staticmethod
    def pause():
        """–ü–∞—É–∑–∞ –ø–æ—Å–ª–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞, —á—Ç–æ–±—ã –∏–≥—Ä–æ–∫ —É—Å–ø–µ–ª –ø—Ä–æ—á–∏—Ç–∞—Ç—å"""
        input(Style.RESET_ALL + HELP_MESSAGE + '–ù–∞–∂–º–∏—Ç–µ Enter\n' + Style.RESET_ALL)

    def goodbye(self):
        """–ü—Ä–æ—â–∞–Ω–∏–µ —Å –∏–≥—Ä–æ–∫–æ–º –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏"""
        print(HELP_MESSAGE + '–î–æ —Å–≤–∏–¥–∞–Ω–∏—è' + Style.RESET_ALL)
        self.pause()

    @staticmethod
    def end_game():
        print(DIE_MASSAGE + '–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏. –û–∑–∏—Ä–∏—Å —É–Ω–∏—á—Ç–æ–∂–∏–ª –º–∏—Ä, –∞ –ê—Ä–∫–æ–Ω–∞ –ø–∞–ª–∞.')

    def about(self):
        """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –∏–≥—Ä—ã –∏ –µ—ë –≤–µ—Ä—Å–∏–∏ –ø–µ—Ä–µ–¥ –µ—ë –Ω–∞—á–∞–ª–æ–º, —á–∞—Å—Ç–∏—á–Ω–æ –∫–æ–ø–∏—Ä—É–µ—Ç README (Github)"""
        version = '0.1.1.6.0'
        print(Fore.MAGENTA + Style.BRIGHT + 'Dream of Eternity')
        print(Fore.MAGENTA + Style.DIM + '–í–µ—Ä—Å–∏—è {}'.format(version))
        self.pause()

    def prologue(self):
        """–í—ã–≤–æ–¥ –Ω–∞—á–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∏—Ä–µ –∏–≥—Ä—ã –ø–µ—Ä–µ–¥ –µ—ë –Ω–∞—á–∞–ª–æ–º"""
        print(STORY_MESSAGE + '–ó–¥—Ä–∞—Å—Ç–≤—É–π, –≤–µ–ª–∏–∫–∏–π –≥–µ—Ä–æ–π –ú—Ä–∞–∫–∞, –ø—Ä–∏–∑–≤–∞–Ω–Ω—ã–π —Å–ø–∞—Å—Ç–∏ –Ω–∞—à –º–∏—Ä –æ—Ç –≤–µ–ª–∏–∫–æ–π —É–≥—Ä–æ–∑—ã.\n'
                              '–û–ø–∞—Å–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–ª–∞ –≤–Ω–µ–∑–∞–ø–Ω–æ, –∫–æ–≥–¥–∞ –≤–µ–ª–∏–∫–∏–π –¥—Ä–∞–∫–æ–Ω –û–∑–∏—Ä–∏—Å –ø–æ—Å–µ–ª–∏–ª—Å—è –≤ –Ω–∞—à–µ–º –º–∏—Ä–µ.\n'
                              '–û–Ω –ø–æ—Å–ª–∞–ª –Ω–∞ –Ω–∞—Å –æ—Ä–¥—ã –º–æ–Ω—Å—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≥—Ä–∞–±–∏–ª–∏ –∏ —É–±–∏–≤–∞–ª–∏. –ü—Ä–æ—à–ª–æ –≤—Ä–µ–º—è, –û–∑–∏—Ä–∏—Å '
                              '—É—Å–ø–æ–∫–æ–∏–ª—Å—è '
                              '–∏ –Ω–∞—Å—Ç–∞–ª –º–∏—Ä,\n'
                              '–Ω–æ –≤–Ω–µ–∑–∞–ø–Ω–æ, –≤—Å—ë –≤–æ–∑–æ–±–Ω–æ–≤–∏–ª–æ—Å—å, —Å—Ç—Ä–∞–¥–∞–Ω–∏—è –∏ —Å–º–µ—Ä—Ç–∏ —Å–Ω–æ–≤–∞ –≤–µ—Ä–Ω—É–ª–∏—Å—å. '
                              '–°–µ–π—á–∞–π –ª—é–¥–∏ —É–º–∏—Ä–∞—é—Ç –∏ –Ω–∞–¥–µ–∂–¥—ã —É–∂–µ –Ω–µ—Ç.\n'
                              '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∞—Å—ã –∫—Ä–∏—Å—Ç–∞–ª–æ–≤ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –º—ã –ø—Ä–∏–∑–≤–∞–ª–∏ —Ç—Ä—ë—Ö –≤–µ–ª–∏–∫–∏—Ö'
                              ' –≥–µ—Ä–æ–≤ –°—Ç—Ä–∞—Ö–∞,\n'
                              '–∏–º–µ–≤—â–∏—Ö –¥–µ–≤—è—Ç—å –∂–∏–∑–Ω–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–∫–æ—Ä–µ –ø–∞–ª–∏ –ø–æ–¥\n'
                              '–Ω–∞—Ç–∏—Å–∫–æ–º –¥—Ä–∞–∫–æ–Ω–∞ –∏ –µ–≥–æ –ø—Ä–∏—Å–ø–µ—à–Ω–∏–∫–æ–≤, —É–Ω–∏—á—Ç–æ–∂–∞–≤ –∏—Ö –∏ –∑–∞—Ö–≤–∞—Ç–∏–≤\n'
                              '–∏—Ö —Å—Ñ–µ—Ä—ã –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è –û–∑–∏—Ä–∏—Å –ª–∏—à—å —É—Å–∏–ª–∏–ª —Å–≤–æ–π –Ω–∞–ø–æ—Ä.\n'
                              '–ù–∞–¥–µ–∂–¥—ã —É–∂–µ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å, –Ω–æ –≤–µ–ª–∏–∫–∞—è –∂—Ä–∏—Ü–∞ –≠–ª–∏–∑–∞ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∂–µ—Ä—Ç–≤–µ–Ω–Ω–æ–π –º–∞–≥–∏–µ–π\n'
                              '–¥–ª—è –ø—Ä–∏–∑—ã–≤–∞ –µ—â—ë –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è - —Ç–µ–±—è. –ü–æ –ø—Ä–∞–≤–¥–µ —Å–∫–∞–∑–∞—Ç—å —à–∞–Ω—Å–æ–≤ —É —Ç–µ–±—è –Ω–µ–º–Ω–æ–≥–æ –∏ –ø–æ–ø—ã—Ç–∫–∞ '
                              '–≤—Å–µ–≥–æ –æ–¥–Ω–∞\n'
                              '–ú—ã –Ω–µ –Ω–∞–¥–µ—è–º—Å—è –Ω–∞ —Ç–≤–æ—é –ø–æ–±–µ–¥—É, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ –º—ã'
                              ' —Å–º–æ–∂–µ–º –ø—Ä–æ–∂–∏—Ç—å —á—É—Ç—å –¥–æ–ª—å—à–µ\n'
                              '–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, —É –Ω–∞—Å –Ω–µ –±—É–¥–µ—Ç —à–∞–Ω—Å–∞ –ø—Ä–æ—Ç–∏–≤ –û–∑–∏—Ä–∏—Å–∞, –µ—Å–ª–∏ –º—ã –Ω–µ —É–±—å—ë–º 10 –µ–≥–æ –≤–µ—Ä–Ω—ã—Ö '
                              '–ø—Ä–∏—Å–ø–µ—à–Ω–∏–∫–æ–≤:\n'
                              '–í–∞—Ä–≥–∞–Ω–∏—Å–∞ - –ø–æ–≤–µ–ª–∏—Ç–µ–ª—è –ª–µ—Å–∞ –°–º–µ—Ä—Ç–∏, –õ–∞–º—É—Ä–∞ - –æ–±–∏—Ç–∞—Ç–µ–ª—è –ø—É—Å—Ç—ã–Ω–∏, –°–Ω–æ—É—Ñ–µ–π—Ä–∏ - –∂–∏—Ç–µ–ª—å–Ω–∏—Ü—É '
                              '—Å–Ω–µ–≥–æ–≤,\n'
                              '–í–∞—Ä–ª–∏—Ç—É, –∑–∞—Ö–≤–∞—Ç–∏–≤—à—É—é –æ–∫–µ–∞–Ω, –ú–µ—Ç–∞–ª–∏–∫—É - –∫–æ—Ä–æ–ª–µ–≤—É –ø–∞—Ä—è—â–∏—Ö –æ—Å—Ç—Ä–æ–≤–æ–≤, –ì—Ä–∏–º—É—Ä–∞, –∂–∞–∂–¥—É—é—â–µ–≥–æ '
                              '–ø–æ—Ä—á–∏, –¢–µ—Ä–∞—ç–ª—å,\n'
                              '–Ω–∞—Ö–æ–¥—è—â—É—é—Å—è –≤ –Ω–µ–¥—Ä–∞—Ö, –í–∏—Ä–∏–∑–∏—Å–∞, —É–Ω–∏—á—Ç–æ–∂–∏–≤—à–µ–≥–æ –ø–ª–µ–º—è –í–∞—à–∏, –ù–µ–∫—Ä–æ–ª–∞,'
                              ' –≤–æ—Å–∫—Ä–µ—Å–∞—é—â–µ–≥–æ –∏ –õ–∞—Ä–∏—Ç–∞,\n'
                              '–ø–æ–≤–µ–ª–∏—Ç–µ–ª—è –ë–µ–∑–¥–Ω—ã, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥ –û–∑–∏—Ä–∏—Å—É —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≤—Å—ë —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–æ,'
                              ' –∏ –∫–æ—Ç–æ—Ä—ã–π —É–Ω–∏—á—Ç–æ–∂–∏–ª '
                              '–∏—Å—Ç–æ—á–Ω–∏–∫\n'
                              '–ò—Å–ø–æ–ª–Ω–µ–Ω–∏—è. –ú—ã, –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–∏, —Å–¥–µ–ª–∞–ª–∏ –≤—Å—ë —á—Ç–æ —Å–º–æ–≥–ª–∏, –ø—Ä–æ—Å—Ç–∏ –Ω–∞—Å, —á—Ç–æ –æ–±—Ä–µ–∫–∞–µ–º —Ç–µ–±—è –Ω–∞ '
                              '–≤–µ—Ä–Ω—É—é —Å–º–µ—Ä—Ç—å')
        self.pause()

    def choice_class(self):
        """–í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –≤ –Ω–∞—á–∞–ª–µ –∏–≥—Ä—ã –¥–ª—è –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è —Å–ª–æ–≤–∞—Ä—è –Ω–∞–≤—ã–∫–æ–≤ –∏–≥—Ä–æ–∫—É. –°–ª–æ–≤–∞—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ hero_stats"""
        while True:
            print(Style.RESET_ALL + Fore.CYAN + '–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å:' + Style.RESET_ALL)
            choice = input(Fore.YELLOW + '–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å ‚ûî 1 (–≤–æ–∏–Ω, –≤–ª–∞–¥–µ—é—â–∏–π —Å–∏–ª–æ–π –∏ —É–Ω–∏—á—Ç–æ–∂–∞—é—â–∏–π '
                                         '–º–æ–Ω—Å—Ç—Ä–æ–≤ –º–µ—á–æ–º)\n' + Style.RESET_ALL)
            if choice == '1':
                self.player = world.Overlord(self)
                self.player.parameter.set_name()
                break

    def start_game(self):
        """–§—É–Ω–∫—Ü–∏–∏, –≤–∫–ª—é—á–∞—é—â–∏–µ—Å—è –ø–µ—Ä–µ–¥ —Å–∞–º—ã–º –∑–∞–ø—É—Å–∫–æ–º –∏–≥—Ä—ã"""
        self.about()
        self.prologue()

    def setting(self):
        """–í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏–≥—Ä—ã"""
        self.choice_class()

    @staticmethod
    def not_enough_money():
        print(MESSAGE_DIALOGUE + '–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥' + Style.RESET_ALL)
        Game.pause()

    def playing_loop(self):
        """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–≥—Ä—ã, —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –≥–æ—Ä–æ–¥–∞ –∏ –±–æ—è–º–∏"""
        while self.player.parameter.alive():
            self.player.parameter.display()
            self.town.town_places()
            self.town.if_lvl_up(self.player)
            choice = input()
            if choice == '1':
                shop = blacksmith.Blacksmith(self.player, self)
                shop.display()
            elif choice == '2':
                heal = hotel.Hotel(self.player, self)
                heal.dialogue()
            elif choice == '3':
                event = random.randint(1, 5)
                if event == 5:
                    event = 2
                else:
                    event = 1
                fight = battle.Dungeon(event, self)
                fight.dungeon(self.player)
            elif choice == '4':
                start = casino.Casino(self.player, self)
                start.dialogue()
            elif choice == '5':
                self.player.inventory.display()
        else:
            self.end_game()

    def start(self):
        self.start_game()
        self.setting()
        self.playing_loop()


class Location:
    pass
